<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>EDUCE - Modern Learning Platform</title>
<style>
  /* --- Reset & base --- */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f4f6f8;
    color: #334;
  }
  button {
    cursor: pointer;
    border: none;
    border-radius: 6px;
    font-weight: 600;
    padding: 12px 20px;
    font-size: 16px;
    transition: background-color 0.3s ease;
  }
  button:focus {
    outline: none;
    box-shadow: 0 0 3px 2px #a0c4ff;
  }
  input, select {
    font-size: 16px;
    padding: 10px 12px;
    border-radius: 6px;
    border: 1.8px solid #ccc;
    width: 100%;
    transition: border-color 0.3s ease;
  }
  input:focus, select:focus {
    border-color: #80b3ff;
    outline: none;
  }
  .container {
    max-width: 480px;
    margin: 40px auto;
    background: white;
    border-radius: 16px;
    padding: 30px 40px;
    box-shadow: 0 8px 24px rgb(0 0 0 / 0.07);
  }
  h1, h2 {
    margin: 0 0 15px;
    font-weight: 700;
  }
  h1 {
    font-size: 36px;
    color: #0a2540;
  }
  h2 {
    font-size: 22px;
    color: #1e3a8a;
  }
  p.description {
    font-size: 18px;
    color: #556;
    margin-bottom: 24px;
    line-height: 1.4;
  }
  .btn-primary {
    background-color: #80b3ff;
    color: white;
  }
  .btn-primary:hover {
    background-color: #4a90e2;
  }
  .btn-secondary {
    background-color: #d0d7e6;
    color: #334;
  }
  .btn-secondary:hover {
    background-color: #b0b8cc;
  }
  .btn-link {
    background: none;
    color: #4a90e2;
    text-decoration: underline;
    padding: 0;
    font-size: 14px;
  }
  .flex-row {
    display: flex;
    gap: 14px;
    margin-bottom: 20px;
  }
  .flex-grow {
    flex-grow: 1;
  }
  .error-msg {
    color: #e53e3e;
    font-size: 13px;
    margin-top: 4px;
  }
  .success-msg {
    color: #2f855a;
    font-size: 13px;
    margin-top: 4px;
  }
  /* Image styling */
  .hero-image {
    max-width: 100%;
    border-radius: 16px;
    margin-bottom: 30px;
  }
  /* Username availability indicator */
  .username-status {
    display: inline-block;
    margin-left: 10px;
    font-weight: 700;
  }
  .username-available {
    color: #2f855a;
  }
  .username-taken {
    color: #e53e3e;
  }
  /* Header user menu */
  .header {
    background: #1e3a8a;
    padding: 10px 40px;
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: 0 0 20px 20px;
  }
  .header .user-info {
    display: flex;
    align-items: center;
    gap: 14px;
  }
  .header .username {
    font-weight: 700;
    cursor: pointer;
  }
  .header .profile-pic {
    width: 40px; height: 40px;
    border-radius: 50%;
    background: #a0c4ff;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: 700;
    color: #0a2540;
    user-select: none;
  }
  /* Dropdown for user info */
  .user-dropdown {
    position: absolute;
    right: 40px;
    top: 65px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 8px 20px rgb(0 0 0 / 0.12);
    width: 260px;
    padding: 16px 24px;
    display: none;
    z-index: 999;
  }
  .user-dropdown.visible {
    display: block;
  }
  .user-dropdown h3 {
    margin-bottom: 12px;
    color: #334;
  }
  .user-dropdown p {
    margin: 6px 0;
    font-size: 15px;
    color: #555;
  }
  /* Dashboard main */
  .dashboard {
    padding: 40px;
  }
  .dashboard h2 {
    margin-bottom: 24px;
  }
  /* Booking form */
  .booking-section {
    background: #f0f5ff;
    border-radius: 12px;
    padding: 24px;
  }
  .booking-section h3 {
    margin-bottom: 16px;
  }
  .booking-section label {
    display: block;
    font-weight: 600;
    margin-bottom: 6px;
  }
  .booking-section input, .booking-section select {
    margin-bottom: 18px;
  }
  /* Back button container */
  .back-container {
    margin-bottom: 20px;
  }
</style>
</head>
<body>

<!-- Header user info bar, shown after login -->
<header class="header" id="header" style="display:none;">
  <div>Welcome, <span id="welcomeRoleName"></span></div>
  <div class="user-info" tabindex="0" id="userMenuToggle" aria-label="User menu" role="button">
    <div class="username" id="headerUsername"></div>
    <div class="profile-pic" id="profilePic">U</div>
  </div>
</header>

<!-- User dropdown info -->
<div class="user-dropdown" id="userDropdown">
  <h3>User Info</h3>
  <p><b>Name:</b> <span id="infoName"></span></p>
  <p><b>Last Name:</b> <span id="infoLastName"></span></p>
  <p><b>Birth Month:</b> <span id="infoMonth"></span></p>
  <p><b>Birth Year:</b> <span id="infoYear"></span></p>
  <p><b>Email:</b> <span id="infoEmail"></span></p>
  <button onclick="logout()" style="margin-top:12px; width:100%; background:#e53e3e; color:white;">Log Out</button>
</div>

<main>
  <!-- Container to dynamically show all steps -->
  <div class="container" id="app">

    <!-- LANDING PAGE -->
    <div id="landingPage">
      <h1>Welcome to EDUCE</h1>
      <p class="description">
        Unlock your potential with free live tutoring classes. 
        Personalized learning with mentors and learners, backed by technology.
      </p>
      <img src="https://images.unsplash.com/photo-1596495577886-d920f1eea7b2?auto=format&fit=crop&w=800&q=80" alt="Students learning" class="hero-image" />
      <div class="flex-row">
        <button class="btn-primary flex-grow" onclick="goToSignUp()">Sign Up</button>
        <button class="btn-secondary flex-grow" onclick="goToLogIn()">Sign In</button>
      </div>
    </div>

    <!-- AGE ENTRY -->
    <div id="ageEntry" style="display:none;">
      <div class="back-container">
        <button class="btn-secondary" onclick="goBackToLanding()">← Back</button>
      </div>
      <h2>How old are you?</h2>
      <div class="flex-row">
        <select id="birthMonthSelect" aria-label="Select birth month">
          <option value="">Month</option>
          <option>January</option><option>February</option><option>March</option><option>April</option>
          <option>May</option><option>June</option><option>July</option><option>August</option>
          <option>September</option><option>October</option><option>November</option><option>December</option>
        </select>
        <select id="birthYearSelect" aria-label="Select birth year">
          <option value="">Year</option>
          <!-- JavaScript will fill years -->
        </select>
      </div>
      <button class="btn-primary" id="ageContinueBtn" disabled onclick="onAgeContinue()">Continue</button>
    </div>

    <!-- EMAIL ENTRY & SIGN IN OPTIONS -->
    <div id="emailEntry" style="display:none;">
      <div class="back-container">
        <button class="btn-secondary" onclick="goBackToAge()">← Back</button>
      </div>
      <h2 id="emailLabel">Enter your email</h2>
      <input type="email" id="emailInput" placeholder="you@example.com" autocomplete="email" />
      <div style="margin-top:12px;">
        <button class="btn-primary" id="emailConfirmBtn" disabled onclick="onEmailConfirm()">Confirm</button>
      </div>
      <div style="margin-top: 20px;">
        <button class="btn-primary" id="googleSignInBtn" onclick="onGoogleSignIn()">Sign in with Google</button>
      </div>
      <p style="margin-top: 10px; font-size: 14px; color:#666;">*You can sign in with Google instantly or use email confirmation*</p>
    </div>

    <!-- OTP VERIFICATION -->
    <div id="otpVerification" style="display:none;">
      <div class="back-container">
        <button class="btn-secondary" onclick="goBackToEmail()">← Back</button>
      </div>
      <h2>Enter verification code sent to <span id="otpEmailDisplay"></span></h2>
      <input type="text" id="otpInput" maxlength="6" placeholder="6-digit code" />
      <button class="btn-primary" id="otpVerifyBtn" disabled onclick="onVerifyOtp()">Verify</button>
      <p style="margin-top: 12px; font-size: 14px;">
        Didn't get the code? <button class="btn-link" onclick="resendOtp()">Resend Code</button>
      </p>
      <p id="otpErrorMsg"
